\documentclass[12pt,fleqn]{article}\usepackage{../common}
\begin{document}

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
import statsmodels.api as sm
import statsmodels.formula.api as smf
df = pd.read_csv('respiratory.csv',index_col=0)
baseline = df[df['month'] == 0][['subject','status']].set_index('subject')
df['status'] = (df['status'] == 'good').astype(int)
df['baseline'] = df.apply(lambda x: baseline.ix[x['subject']],axis=1)
print df.head(4)
\end{minted}

\begin{verbatim}
     centre treatment  gender  age  status  month  subject baseline
1         1   placebo  female   46       0      0        1     poor
112       1   placebo  female   46       0      1        1     poor
223       1   placebo  female   46       0      2        1     poor
334       1   placebo  female   46       0      3        1     poor
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
mdlm = smf.logit("status ~ baseline + month  + treatment + gender + age + C(centre)", df)
mdlmf = mdlm.fit()
print(mdlmf.summary())
\end{minted}

\begin{verbatim}
Optimization terminated successfully.
         Current function value: 0.500844
         Iterations 6
                           Logit Regression Results                           
==============================================================================
Dep. Variable:                 status   No. Observations:                  555
Model:                          Logit   Df Residuals:                      548
Method:                           MLE   Df Model:                            6
Date:                Thu, 19 Feb 2015   Pseudo R-squ.:                  0.2743
Time:                        22:19:57   Log-Likelihood:                -277.97
converged:                       True   LL-Null:                       -383.03
                                        LLR p-value:                 1.327e-42
==========================================================================================
                             coef    std err          z      P>|z|      [95.0% Conf. Int.]
------------------------------------------------------------------------------------------
Intercept                  1.0940      0.357      3.066      0.002         0.395     1.793
baseline[T.poor]          -2.5365      0.232    -10.925      0.000        -2.992    -2.081
treatment[T.treatment]     1.1797      0.226      5.229      0.000         0.737     1.622
gender[T.male]             0.1112      0.280      0.397      0.691        -0.438     0.660
C(centre)[T.2]             0.5912      0.224      2.641      0.008         0.152     1.030
month                      0.0989      0.074      1.330      0.184        -0.047     0.245
age                       -0.0160      0.008     -1.908      0.056        -0.032     0.000
==========================================================================================
\end{verbatim}


\begin{minted}[fontsize=\footnotesize]{python}
%load_ext rpy2.ipython
%R library(lme4)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
%R data(dietox, package='geepack')
%R res = summary(lmer('Weight ~ Time + (1|Pig)', data=dietox))
%Rpull res
print res
\end{minted}

\begin{verbatim}
Linear mixed model fit by REML ['lmerMod']
Formula: Weight ~ Time + (1 | Pig)
   Data: dietox

REML criterion at convergence: 4809.6

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-4.7118 -0.5696 -0.0943  0.4877  4.7732 

Random effects:
 Groups   Name        Variance Std.Dev.
 Pig      (Intercept) 40.39    6.356   
 Residual             11.37    3.371   
Number of obs: 861, groups:  Pig, 72

Fixed effects:
            Estimate Std. Error t value
(Intercept) 15.72352    0.78805   19.95
Time         6.94251    0.03339  207.94

Correlation of Fixed Effects:
     (Intr)
Time -0.275

\end{verbatim}














\end{document}
