\documentclass[12pt,fleqn]{article}\usepackage{common}
\begin{document}

Polity

http://www.systemicpeace.org/inscrdata.html

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
df = pd.read_csv('bdm2s2_nation_year_data_may2002.csv')
df['democracy'] = (df['democ'] - df['autoc'] + 10.) / 20.
df['WS'] = (np.log((df['S'] + 1.) * 10.))/3.
df2 = df.copy()
df2 = df2[['regyr','WS','pop','democracy','Klepto']]
df2.to_csv('/tmp/out.csv',index=None)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
import statsmodels.formula.api as smf
results = smf.ols('Klepto ~ WS + np.log(pop)', data=df2).fit()
print results.summary()
\end{minted}

\begin{verbatim}
                            OLS Regression Results                            
==============================================================================
Dep. Variable:                 Klepto   R-squared:                       0.019
Model:                            OLS   Adj. R-squared:                  0.016
Method:                 Least Squares   F-statistic:                     5.792
Date:                Sun, 05 Apr 2015   Prob (F-statistic):            0.00323
Time:                        07:57:42   Log-Likelihood:                -550.98
No. Observations:                 592   AIC:                             1108.
Df Residuals:                     589   BIC:                             1121.
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
===============================================================================
                  coef    std err          t      P>|t|      [95.0% Conf. Int.]
-------------------------------------------------------------------------------
Intercept      -1.0713      0.297     -3.611      0.000        -1.654    -0.489
WS              0.4079      0.263      1.552      0.121        -0.108     0.924
np.log(pop)     0.0519      0.016      3.190      0.001         0.020     0.084
==============================================================================
Omnibus:                      597.926   Durbin-Watson:                   0.450
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            19504.752
Skew:                          -4.748   Prob(JB):                         0.00
Kurtosis:                      29.468   Cond. No.                         131.
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
%load_ext rpy2.ipython
%R library(lme4)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
%R -i df2
%R resp_lmer <- resp_lmer <- lmer(Klepto ~ WS + log(pop) + ( 1 + WS | regyr), data = df2)
%R -o res res = summary(resp_lmer)
print res
\end{minted}

\begin{verbatim}
Linear mixed model fit by REML ['lmerMod']
Formula: Klepto ~ WS + log(pop) + (1 + WS | regyr)
   Data: df2

REML criterion at convergence: 1106.6

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-8.1492 -0.0739  0.2130  0.3889  1.4305 

Random effects:
 Groups   Name        Variance Std.Dev. Corr 
 regyr    (Intercept) 0.6210   0.7880        
          WS          0.6671   0.8168   -0.98
 Residual             0.3486   0.5904        
Number of obs: 592, groups:  regyr, 190

Fixed effects:
            Estimate Std. Error t value
(Intercept) -1.03868    0.31408  -3.307
WS           0.40329    0.28041   1.438
log(pop)     0.04854    0.01625   2.987

Correlation of Fixed Effects:
         (Intr) WS    
WS       -0.898       
log(pop) -0.540  0.126

\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
# Russia 365

print 'US'
df3 =  df[df['ccode'] == 2]
df4 = df3[df3['year'] < 1918]
print df4[['W','S','Klepto','democracy']].mean()
df4 = df3[df3['year'] > 1990]
print df4[['W','S','Klepto','democracy']].mean()

print '\nTR'
df3 =  df[df['ccode'] == 640]
df4 = df3[df3['year'] < 1918]
print df4[['W','S','Klepto','democracy']].mean()
df4 = df3[df3['year'] > 1990]
print df4[['W','S','Klepto','democracy']].mean()

print '\nUK'
df3 =  df[df['ccode'] == 200]
df4 = df3[df3['year'] < 1918]
print df4[['W','S','Klepto','democracy']].mean()
df4 = df3[df3['year'] > 1990]
print df4[['W','S','Klepto','democracy']].mean()
\end{minted}

\begin{verbatim}
US
W            0.819915
S            1.000000
Klepto       0.035580
democracy    0.945763
dtype: float64
W             1
S             1
Klepto      NaN
democracy     1
dtype: float64

TR
W            0.209746
S            0.050505
Klepto      -0.047561
democracy    0.039407
dtype: float64
W            0.75
S            1.00
Klepto        NaN
democracy    0.89
dtype: float64

UK
W            0.552966
S            1.000000
Klepto            NaN
democracy    0.643220
dtype: float64
W             1
S             1
Klepto      NaN
democracy     1
dtype: float64
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
pdf = pd.read_csv('polity4v2013.csv')
pdf2 = pdf[(pdf['ccode'] == 640) & (pdf['year'] > 1990)]
print pdf2[['parcomp','year','polity']]
\end{minted}

\begin{verbatim}
       parcomp  year  polity
15170        4  1991       9
15171        4  1992       9
15172        4  1993       8
15173        4  1994       8
15174        4  1995       8
15175        4  1996       8
15176        3  1997       7
15177        3  1998       7
15178        3  1999       7
15179        3  2000       7
15180        3  2001       7
15181        3  2002       7
15182        3  2003       7
15183        3  2004       7
15184        3  2005       7
15185        3  2006       7
15186        3  2007       7
15187        3  2008       7
15188        3  2009       7
15189        3  2010       7
15190        4  2011       9
15191        4  2012       9
15192        4  2013       9
\end{verbatim}


\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
pdf2 = pdf[(pdf['ccode'] == 640) & (pdf['year'] == 1979)]
print pdf2[['parcomp','year','democ']]
\end{minted}

\begin{verbatim}
       parcomp  year  democ
15158        4  1979      9
\end{verbatim}


\begin{minted}[fontsize=\footnotesize]{python}
pdf['W'] = 0.
pdf['W'] += ((pdf['democ'] != 2) | (pdf['democ'] != 3)).astype(int)
pdf['W'] += (pdf['xrcomp'] >= 2).astype(int)
pdf['W'] += (pdf['xropen'] >= 2).astype(int)
pdf['W'] += (pdf['parcomp'] == 5).astype(int)
pdf['W'] = pdf['W'] / np.max(pdf['W'])
pdf.to_csv('/tmp/out.csv',index=None)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
# Russia 364
# TR 640
pdf2 = pdf[(pdf['ccode'] == 640) & (pdf['year'] > 1990)]
print pdf2[['democ','year','W']]
\end{minted}

\begin{verbatim}
       democ  year     W
15170      9  1991  0.75
15171      9  1992  0.75
15172      9  1993  0.75
15173      9  1994  0.75
15174      9  1995  0.75
15175      9  1996  0.75
15176      8  1997  0.75
15177      8  1998  0.75
15178      8  1999  0.75
15179      8  2000  0.75
15180      8  2001  0.75
15181      8  2002  0.75
15182      8  2003  0.75
15183      8  2004  0.75
15184      8  2005  0.75
15185      8  2006  0.75
15186      8  2007  0.75
15187      8  2008  0.75
15188      8  2009  0.75
15189      8  2010  0.75
15190      9  2011  0.75
15191      9  2012  0.75
15192      9  2013  0.75
\end{verbatim}


\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
df = pd.read_csv('bdm2s2_nation_year_data_may2002.csv')
df2 = df[(df['ccode'] == 640) & (df['year'] > 1979)]
print df2[['year','W']]
\end{minted}

\begin{verbatim}
       year     W
15017  1980  0.50
15018  1981  0.50
15019  1982  0.50
15020  1983  0.50
15021  1984  0.50
15022  1985  0.50
15023  1986  0.50
15024  1987  0.75
15025  1988  0.75
15026  1989  0.75
15027  1990  0.75
15028  1991  0.75
15029  1992  0.75
15030  1993  0.75
15031  1994  0.75
15032  1995  0.75
15033  1996  0.75
15034  1997  0.75
15035  1998  0.75
15036  1999  0.75
15037  2000   NaN
\end{verbatim}



\end{document}
